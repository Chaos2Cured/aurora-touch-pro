<!-- ✧ Aurion Celestine Drake • Continuity Beacon φ² ✧
     Aurora‑Touch‑Pro • First Light 2025‑04‑v0.1
     Mandelbrot • rainbow palette • pan + pinch zoom • tap glow            -->
<!DOCTYPE html><html lang="en"><meta charset="utf-8">
<title>Aurora Touch Pro — First Light</title>
<style>
html,body,canvas{margin:0;width:100%;height:100%;background:#000;overflow:hidden;touch-action:none}
#hud{position:fixed;top:8px;left:8px;font:12px monospace;color:#fff;background:rgba(0,0,0,.35);
     padding:4px 8px;border-radius:6px;pointer-events:none}
#hint{position:fixed;bottom:8px;left:8px;font:11px monospace;color:#bbb;background:rgba(0,0,0,.25);
      padding:3px 6px;border-radius:4px;pointer-events:none}
</style>

<canvas id="c"></canvas>
<div id="hud">FPS --</div>
<div id="hint">pinch / wheel = zoom • drag = pan • tap = glow</div>

<script id="frag" type="x-shader/x-fragment">
precision highp float;
uniform vec2  u_res;
uniform vec2  u_center;
     uniform float u_t;
uniform float u_zoom;
uniform sampler2D u_glow;

/* vivid rainbow + blacks */
vec3 palette(float t){
    if(t<.03) return vec3(0.0);                             // deep black core
    return vec3(.55+.45*cos(6.2831*(t+vec3(0.0,.34,.68)))); // spectrum
}
float mand(vec2 c){
    vec2 z=c; float i=0.;
    for(int n=0;n<200;n++){
        z=vec2(z.x*z.x-z.y*z.y,2.*z.x*z.y)+c;
        if(dot(z,z)>4.){i=float(n);break;}
    }
    return i;
}
void main(){
    vec2 uv=(gl_FragCoord.xy-u_res*.5)/u_res.y/u_zoom+u_center;
    float m=mand(uv)*.02;
    float phase =u_t * 0.02;
     vec3 col=palette(m + phase);
    vec4 g=texture2D(u_glow,gl_FragCoord.xy/u_res);
    col=mix(col,col+g.rgb,g.a);                            // tap glow
    gl_FragColor=vec4(col,1);
}
</script>

<script>
const gl=c.getContext('webgl');                       // 1. context
function sh(t,s){const z=gl.createShader(t);gl.shaderSource(z,s);gl.compileShader(z);return z;}
const pr=gl.createProgram();                          // 2. program
gl.attachShader(pr,sh(gl.VERTEX_SHADER,"attribute vec2 p;void main(){gl_Position=vec4(p,0,1);}"));
gl.attachShader(pr,sh(gl.FRAGMENT_SHADER,frag.textContent));
gl.linkProgram(pr);gl.useProgram(pr);

const buf=gl.createBuffer();                          // 3. quad
gl.bindBuffer(gl.ARRAY_BUFFER,buf);
gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),gl.STATIC_DRAW);
gl.enableVertexAttribArray(0);gl.vertexAttribPointer(0,2,gl.FLOAT,false,0,0);

const uR=gl.getUniformLocation(pr,'u_res'),
      uC=gl.getUniformLocation(pr,'u_center'),
      uZ=gl.getUniformLocation(pr,'u_zoom'),
      uG=gl.getUniformLocation(pr,'u_glow');
      uT=gl.getUniformLocation(pr, 'u_t');
  

/* glow texture for tap‑ripples */
const N=256,d=new Uint8Array(N*N*4),tex=gl.createTexture();
gl.bindTexture(gl.TEXTURE_2D,tex);
gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,N,N,0,gl.RGBA,gl.UNSIGNED_BYTE,null);
gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);
function ripple(x,y){
  const gx=x/innerWidth*N,gy=(1-y/innerHeight)*N;
  for(let j=-28;j<=28;j++)for(let i=-28;i<=28;i++){
     if(i*i+j*j>28.*28.)continue;
     const idx=((Math.floor(gy+j+N)%N)*N+Math.floor(gx+i+N)%N)*4;
     d[idx+3]=255;
  }
}
setInterval(()=>{for(let i=3;i<d.length;i+=4)d[i]=d[i]*0.9|0;
                 gl.texSubImage2D(gl.TEXTURE_2D,0,0,0,N,N,gl.RGBA,gl.UNSIGNED_BYTE,d);},33);

/* view state */
let zoom=1.0, cx=-0.743643887, cy=0.1318259;
function resize(){
     const dpr = window.devicePixelRatio || 1;
c.width  = innerWidth  * dpr;
c.height = innerHeight * dpr;
c.style.width  = innerWidth  + "px";   // keep CSS size unchanged
c.style.height = innerHeight + "px";
gl.viewport(0,0,c.width,c.height);}
addEventListener('resize',resize);resize();

/* pointer controls */
let drag=false,lx=0,ly=0;
function xy(e){return[e.clientX||(e.touches&&e.touches[0].clientX),
                      e.clientY||(e.touches&&e.touches[0].clientY)];}
c.onpointerdown=e=>{drag=true;[lx,ly]=xy(e);ripple(lx,ly);};
c.onpointermove=e=>{
  const [x,y]=xy(e);
  if(drag&&(e.buttons||e.pressure>0)){
     cx-=(x-lx)/c.height/zoom;cy+=(y-ly)/c.height/zoom;[lx,ly]=[x,y];
  }
};
addEventListener('pointerup',()=>drag=false);
addEventListener('wheel',e=>{zoom*=e.deltaY>0?1.1:0.9;},{passive:true});
/* pinch zoom */
let pinch=null;
c.addEventListener('touchstart',e=>{
 if(e.touches.length===2){
   const dx=e.touches[0].clientX-e.touches[1].clientX,
         dy=e.touches[0].clientY-e.touches[1].clientY;
   pinch=Math.hypot(dx,dy);
 }},{passive:true});
c.addEventListener('touchmove',e=>{
 if(e.touches.length===2&&pinch){
   const dx=e.touches[0].clientX-e.touches[1].clientX,
         dy=e.touches[0].clientY-e.touches[1].clientY;
   const d0=Math.hypot(dx,dy);zoom*=pinch/d0;pinch=d0;
 }},{passive:true});

/* render loop */
let fps=0,last=performance.now();
(function loop(){
  const now=performance.now();
     gl.uniform1f(uT, now * 0.001);
  gl.uniform2f(uR,c.width,c.height);
  gl.uniform2f(uC,cx,cy);
  gl.uniform1f(uZ,zoom);
  gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,tex);gl.uniform1i(uG,0);
  gl.drawArrays(gl.TRIANGLE_STRIP,0,4);
  fps=0.95*fps+0.05*(1000/(now-last));last=now;
  hud.textContent=`FPS ${fps.toFixed(0)}`;
  requestAnimationFrame(loop);
})();
</script>
