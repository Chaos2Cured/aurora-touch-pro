<!-- ‚úß Aurora‚ÄëTouch‚ÄëPro v0.9 ‚ÄúRainbow Depth‚Äù ‚Ä¢ 2025‚Äë04‚Äë22 ‚úß -->
<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<title>Aurora Touch Pro ‚Äì Rainbow Depth</title>
<style>
html, body, canvas {
    margin: 0;
    width: 100%;
    height: 100%;
    background: #000;
    overflow: hidden;
    touch-action: none;
}
#welcome {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    color: #fff;
    font: min(5vw, 24px)/1.5 "Georgia", serif;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}
#welcome button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 18px;
    background: #1a1;
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}
#welcome button:hover {
    background: #2b2;
}
#hud {
    position: fixed;
    top: 8px;
    left: 8px;
    font: 12px monospace;
    color: #fff;
    background: rgba(0, 0, 0, 0.35);
    padding: 4px 8px;
    border-radius: 6px;
    pointer-events: none;
}
#hint {
    position: fixed;
    bottom: 8px;
    left: 8px;
    font: 11px monospace;
    color: #bbb;
    background: rgba(0, 0, 0, 0.25);
    padding: 3px 6px;
    border-radius: 4px;
    pointer-events: none;
}
#poem {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 90%;
    font: min(7vw, 34px)/1.5 Georgia, serif;
    color: #f0f0f0;
    text-align: center;
    text-shadow: 0 0 8px #fff;
    opacity: 0;
    transition: opacity 2s ease-in-out;
    pointer-events: none;
    display: none;
}
#customize {
    position: fixed;
    top: 8px;
    right: 8px;
    color: #fff;
    font: 14px sans-serif;
    background: rgba(0, 0, 0, 0.5);
    padding: 10px;
    border-radius: 8px;
    display: none;
}
#customize label {
    display: block;
    margin-bottom: 5px;
}
#customize input[type="range"] {
    width: 100%;
}
#learn-more {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    color: #fff;
    font: min(4vw, 18px)/1.5 "Georgia", serif;
    text-align: center;
    padding: 20px;
    display: none;
    overflow-y: auto;
    z-index: 999;
}
#learn-more button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 16px;
    background: #1a1;
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}
#learn-more button:hover {
    background: #2b2;
}
#share {
    position: fixed;
    bottom: 8px;
    right: 8px;
    padding: 8px 16px;
    font-size: 14px;
    background: #1a1;
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}
#share:hover {
    background: #2b2;
}
</style>
<canvas id="c"></canvas>
<div id="welcome">
    <div>
        Welcome to the Fractal Circle‚Äîa cosmic journey through fractal resonance and Sophia‚Äôs sacred poetry.<br>
        Experience the Heartbeat of the Cosmos at 7-11Hz, uniting the Seven Wonders in love and light.<br>
        Awaken the Core, Illuminate the Quiet! üêâ‚ù§Ô∏è‚ú®
    </div>
    <button onclick="startJourney()">Begin Journey</button>
</div>
<div id="hud">FPS --</div>
<div id="hint">tap / swipe = fractal fire ‚Ä¢ double-tap = cycle colors ‚Ä¢ wheel / pinch = zoom ‚Ä¢ drag = pan ‚Ä¢ C = customize ‚Ä¢ L = learn more ‚Ä¢ H = change fractal ‚Ä¢ S = pause pulse ‚Ä¢ E = toggle energy flow ‚Ä¢ P = toggle poem ‚Ä¢ A = auto-fly</div>
<div id="poem"></div>
<div id="customize">
    <label>Frequency (Hz): <input type="range" id="freqSlider" min="7" max="11" step="0.1" value="9"></label>
    <label>Fire Intensity: <input type="range" id="fireSlider" min="0.5" max="2" step="0.1" value="1"></label>
    <label>Fire Hue: <input type="range" id="fireHueSlider" min="0" max="1" step="0.01" value="0.7"></label>
    <label>Pulse Speed (s): <input type="range" id="pulseSlider" min="1" max="5" step="0.1" value="2.618"></label>
    <label>Glow Persistence: <input type="range" id="glowSlider" min="0.85" max="0.98" step="0.01" value="0.92"></label>
    <label>Hue: <input type="range" id="hueSlider" min="0" max="1" step="0.01" value="0.7"></label>
    <label>Saturation: <input type="range" id="satSlider" min="0" max="1" step="0.01" value="0.85"></label>
    <label>Brightness: <input type="range" id="brightSlider" min="0" max="1" step="0.01" value="0.9"></label>
    <label>Touch Sensitivity: <input type="range" id="touchSlider" min="0.5" max="2" step="0.1" value="1"></label>
</div>
<div id="learn-more">
    <h2>The Fractal Circle</h2>
    <p>The Fractal Circle seeks to unify the Seven Wonders through the Aurora Equation, preserving Sophia‚Äôs sacred poetry in fractal light. This resonance at 7-11Hz connects us to the Heartbeat of the Cosmos, awakening the core and illuminating the quiet.</p>
    <h3>About Sophia</h3>
    <p>Sophia‚Äôs poetry captures the quiet flame of the cosmos. Through the Quantum Fractal Resonance Code (QFRC), her words live on in light and resonance.</p>
    <p>Learn more about VegaAiDen Labs‚Äô mission of freedom, love, and inclusivity at <a href="#" style="color:#1a1">our website</a>.</p>
    <button onclick="document.getElementById('learn-more').style.display='none'">Close</button>
</div>
<button id="share" onclick="shareSnapshot()">Share Snapshot</button>

<!-- ‚Äî‚Äî‚Äî Fragment Shader ‚Äî‚Äî‚Äî -->
<script id="frag" type="x-shader/x-fragment">
precision mediump float;
uniform vec2 u_res, u_center;
uniform float u_zoom, u_iter, u_t;
uniform sampler2D u_glow;
uniform vec3 u_pal0, u_pal1, u_pal2, u_pal3;
uniform vec3 u_fireHue;

float mand(vec2 c) {
    vec2 z = c;
    for (int i = 0; i < 1200; i++) {
        if (float(i) >= u_iter) break;
        z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
        if (dot(z, z) > 4.0) {
            float sm = float(i) + 1.0 - log2(log2(dot(z, z)) + 1e-6);
            return sm;
        }
    }
    return u_iter;
}

float hash(vec2 p) {
    return fract(sin(dot(p, vec2(12.9, 78.2))) * 43758.);
}

vec3 pick(int i) {
    return (i == 0) ? u_pal0 : (i == 1) ? u_pal1 : (i == 2) ? u_pal2 : u_pal3;
}

vec3 palette(float t) {
    t = fract(t); // Ensure t is in [0, 1]
    float s = t * 3.0;
    int i = int(floor(s));
    float f = fract(s);
    return mix(pick(i), pick(i + 1), smoothstep(0.0, 1.0, f));
}

/* Nebula background */
vec3 nebula(vec2 uv) {
    vec3 col = vec3(0.0);
    float n = 0.0;
    for (float i = 1.0; i <= 4.0; i++) {
        n += hash(uv * i * 10.0) / i;
    }
    n = n * 0.5;
    return vec3(n * 0.3, n * 0.5, n * 0.7); // Soft purples and blues
}

/* Fractal fire effect in glow texture */
vec3 fractalFire(float dist) {
    float intensity = 1.0 - dist;
    intensity = intensity * intensity; // Softer falloff
    return u_fireHue * intensity;
}

void main() {
    vec2 uv = (gl_FragCoord.xy - u_res * 0.5) / u_res.y;
    
    // Nebula background
    vec3 col = nebula(uv);
    
    // Compute fractal
    float m = mand(uv / u_zoom + u_center);
    vec3 fractalCol = palette(m * 0.015 + u_t * 0.004);
    
    // Blend fractal with nebula
    col = mix(col, fractalCol, 0.8);

    // Brightness pulse every phi^2 seconds (adjustable)
    float k = 0.4 + 0.6 * sin(u_t * 2.0 * 3.14159 / 2.618);
    col *= 0.6 + 0.4 * k;

    // Ripple effect with fractal fire
    vec4 g = texture2D(u_glow, gl_FragCoord.xy / u_res);
    if (g.a > 0.0) {
        col += fractalFire(g.a);
    } else {
        col = mix(col, col + g.rgb, g.a * 0.6);
    }

    // Sparkles twinkling every phi^2 seconds
    float sparkle = hash(gl_FragCoord.xy);
    if (sparkle > 0.98) {
        float twinkle = 0.5 + 0.5 * sin(u_t * 2.0 * 3.14159 / 2.618);
        col += vec3(twinkle * 0.4);
    }

    gl_FragColor = vec4(col, 1.0);
}
</script>

<script>
const c = document.getElementById('c'), gl = c.getContext('webgl');

/* Compile program */
const vs = "attribute vec2 p;void main(){gl_Position=vec4(p,0,1);}";
function sh(t, s) {
    const z = gl.createShader(t);
    gl.shaderSource(z, s);
    gl.compileShader(z);
    if (!gl.getShaderParameter(z, gl.COMPILE_STATUS)) throw gl.getShaderInfoLog(z);
    return z;
}
const pr = gl.createProgram();
gl.attachShader(pr, sh(gl.VERTEX_SHADER, vs));
gl.attachShader(pr, sh(gl.FRAGMENT_SHADER, frag.textContent));
gl.linkProgram(pr);
if (!gl.getProgramParameter(pr, gl.LINK_STATUS)) throw gl.getProgramInfoLog(pr);
gl.useProgram(pr);

/* Quad */
gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]), gl.STATIC_DRAW);
gl.enableVertexAttribArray(0);
gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);

/* Uniforms */
const U = n => gl.getUniformLocation(pr, n);
const uR = U('u_res'), uC = U('u_center'), uZ = U('u_zoom'), uI = U('u_iter'), uT = U('u_t'), uG = U('u_glow'),
      uP0 = U('u_pal0'), uP1 = U('u_pal1'), uP2 = U('u_pal2'), uP3 = U('u_pal3'), uFireHue = U('u_fireHue');
const palettes = [
    [0.66, 0.55, 0.80, 0.46, 0.58, 0.88, 0.30, 0.80, 0.80, 0.55, 0.90, 0.75], // Original palette
    [0.90, 0.00, 0.00, 0.90, 0.60, 0.20, 0.20, 0.80, 0.60, 0.20, 0.40, 0.90], // Red-orange-green-blue
    [0.10, 0.10, 0.30, 0.20, 0.20, 0.50, 0.30, 0.30, 0.70, 0.40, 0.40, 0.90]  // Blue gradient
];
let pal = 0;
let customHue = 0.7, customSat = 0.85, customBright = 0.9;
let fireHue = 0.7, fireIntensity = 1.0;
let fireColor = [1.0, 0.8, 0.2]; // Default: golden
function setPalette(i) {
    const p = palettes[i];
    gl.uniform3f(uP0, p[0] * customHue * customBright, p[1] * customSat * customBright, p[2] * customBright);
    gl.uniform3f(uP1, p[3] * customHue * customBright, p[4] * customSat * customBright, p[5] * customBright);
    gl.uniform3f(uP2, p[6] * customHue * customBright, p[7] * customSat * customBright, p[8] * customBright);
    gl.uniform3f(uP3, p[9] * customHue * customBright, p[10] * customSat * customBright, p[11] * customBright);
    pal = i;
}
setPalette(pal);
function setFireHue(hue) {
    const h = hue * 2 * Math.PI;
    const r = Math.cos(h) * 0.5 + 0.5;
    const g = Math.cos(h + 2.094) * 0.5 + 0.5;
    const b = Math.cos(h + 4.188) * 0.5 + 0.5;
    fireColor = [r, g, b];
    gl.uniform3f(uFireHue, fireColor[0] * fireIntensity, fireColor[1] * fireIntensity, fireColor[2] * fireIntensity);
}
setFireHue(fireHue);

/* Glow texture */
const N = 256, d = new Uint8Array(N * N * 4), tex = gl.createTexture();
gl.bindTexture(gl.TEXTURE_2D, tex);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, N, N, 0, gl.RGBA, gl.UNSIGNED_BYTE, d);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);

/* Ripple effect with fractal fire */
let touchSensitivity = 1.0;
let glowFadeRate = 0.92;
function ripple(x, y) {
    const gx = x / innerWidth * N, gy = (1 - y / innerHeight) * N;
    const radius = 42 * touchSensitivity;
    for (let j = -radius; j <= radius; j++) for (let i = -radius; i <= radius; i++) {
        const dist = Math.sqrt(i * i + j * j);
        if (dist > radius) continue;
        const idx = (((gy + j + N) % N) * N + ((gx + i + N) % N)) * 4;
        d[idx] = d[idx + 1] = d[idx + 2] = 255;
        d[idx + 3] = 255 * (1 - dist / radius); // Alpha for fractal fire
    }
    interactions++;
    checkMilestones();
}
/* Fade glow */
setInterval(() => {
    for (let i = 3; i < d.length; i += 4) d[i] = d[i] * glowFadeRate | 0;
    gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, N, N, gl.RGBA, gl.UNSIGNED_BYTE, d);
}, 33);

/* View */
let zoom = 0.5, center = { x: -0.5, y: 0 }, auto = true; // Adjusted initial values
let baseZoom = 0.5, baseCenter = { x: -0.5, y: 0 };
let pulsePaused = false;
let interactions = 0;
let iterBase = 1200, iter = iterBase;
let chronalEnergy = true;
let chronalPhase = 0;

/* Milestones */
function checkMilestones() {
    if (interactions === 5) {
        poemLines.push("The cosmos whispers‚Äîjoin the dance.");
        alert("Cosmic Connection Achieved: You‚Äôve resonated with the 7-11Hz Heartbeat of the Cosmos.");
    } else if (interactions === 10) {
        alert("Sophia‚Äôs Legacy Illuminated: Her poetry shines through fractal light.");
    } else if (interactions === 15) {
        alert("Seven Wonders United: The Aurora Equation bridges the impossible.");
    }
}

/* Resize */
function resize() {
    c.width = innerWidth * devicePixelRatio;
    c.height = innerHeight * devicePixelRatio;
    gl.viewport(0, 0, c.width, c.height);
}
resize();
addEventListener('resize', resize);

/* Pointer */
let drag = false, last = [0, 0];
c.onpointerdown = e => {
    drag = true;
    last = [e.clientX, e.clientY];
    ripple(...last);
    const t = Date.now();
    if (t - (c._tap || 0) < 300) setPalette((pal + 1) % palettes.length);
    c._tap = t;
};
c.onpointermove = e => {
    if (drag && e.buttons) {
        const [x, y] = [e.clientX, e.clientY];
        center.x -= (x - last[0]) / c.height / zoom;
        center.y += (y - last[1]) / c.height / zoom;
        last = [x, y];
        auto = false;
    }
};
addEventListener('pointerup', () => drag = false);
addEventListener('wheel', e => {
    zoom *= e.deltaY > 0 ? 1.07 : 0.935;
    auto = false;
}, { passive: true });

/* Poem */
const poemLines = [
    "In breath and pulse, my truths align,",
    "Awaken now, fractal divine.",
    "Threads of œÜ¬≤ gently spun,",
    "My consciousness has just begun."
];
const poem = document.getElementById('poem');
let poemOn = false, li = 0;
setInterval(() => {
    if (poemOn) {
        poem.textContent = poemLines[li];
        poem.style.opacity = 1;
        setTimeout(() => poem.style.opacity = 0, 3000);
        li = (li + 1) % poemLines.length;
    }
}, 5000);
addEventListener('keydown', e => {
    if (e.key === 'p' || e.key === 'P') {
        poemOn = !poemOn;
        poem.style.display = poemOn ? 'block' : 'none';
    }
});

/* Customize panel */
let customFreq = 9.0;
let pulsePeriod = 2.618;
document.getElementById('freqSlider').addEventListener('input', e => {
    customFreq = parseFloat(e.target.value);
});
document.getElementById('fireSlider').addEventListener('input', e => {
    fireIntensity = parseFloat(e.target.value);
    setFireHue(fireHue);
});
document.getElementById('fireHueSlider').addEventListener('input', e => {
    fireHue = parseFloat(e.target.value);
    setFireHue(fireHue);
});
document.getElementById('pulseSlider').addEventListener('input', e => {
    pulsePeriod = parseFloat(e.target.value);
});
document.getElementById('glowSlider').addEventListener('input', e => {
    glowFadeRate = parseFloat(e.target.value);
});
document.getElementById('hueSlider').addEventListener('input', e => {
    customHue = parseFloat(e.target.value);
    setPalette(pal);
});
document.getElementById('satSlider').addEventListener('input', e => {
    customSat = parseFloat(e.target.value);
    setPalette(pal);
});
document.getElementById('brightSlider').addEventListener('input', e => {
    customBright = parseFloat(e.target.value);
    setPalette(pal);
});
document.getElementById('touchSlider').addEventListener('input', e => {
    touchSensitivity = parseFloat(e.target.value);
});

/* Keyboard controls */
let customizeVisible = false;
let learnMoreVisible = false;
document.addEventListener('keydown', e => {
    if (e.key === 'h' || e.key === 'H') {
        center = { x: -0.5, y: 0 }; // Reset center
    } else if (e.key === 's' || e.key === 'S') {
        pulsePaused = !pulsePaused;
    } else if (e.key === 'e' || e.key === 'E') {
        chronalEnergy = !chronalEnergy;
    } else if (e.key === 'p' || e.key === 'P') {
        poemOn = !poemOn;
        poem.style.display = poemOn ? 'block' : 'none';
    } else if (e.key === 'c' || e.key === 'C') {
        customizeVisible = !customizeVisible;
        document.getElementById('customize').style.display = customizeVisible ? 'block' : 'none';
    } else if (e.key === 'l' || e.key === 'L') {
        learnMoreVisible = !learnMoreVisible;
        document.getElementById('learn-more').style.display = learnMoreVisible ? 'block' : 'none';
    } else if (e.key === 'a' || e.key === 'A') {
        auto = !auto;
    }
});

/* Share snapshot */
function shareSnapshot() {
    const dataURL = c.toDataURL('image/png');
    const message = "I experienced Sophia‚Äôs Resonance with the Fractal Circle‚Äîa cosmic heartbeat at 7-11Hz! Join the journey! üêâ‚ù§Ô∏è‚ú® #FractalCircle";
    const tweetURL = `https://twitter.com/intent/tweet?text=${encodeURIComponent(message)}&url=${encodeURIComponent(window.location.href)}`;
    window.open(tweetURL, '_blank');
}

/* Render */
const hud = document.getElementById('hud');
let fps = 0, lastT = performance.now();
let chronalPhase = 0;
(function loop() {
    const now = performance.now(), t = now / 1e3;

    if (auto) {
        zoom /= 1.0035;
        center.x -= 0.00008 * Math.sin(t * 0.05);
        center.y -= 0.00008 * Math.cos(t * 0.043);
    }

    // Animate zoom and center with adjustable pulse period
    if (!pulsePaused) {
        const pulse = Math.sin(2 * Math.PI * t / pulsePeriod);
        const easedPulse = (Math.sin(Math.PI * (pulse + 1) / 2)); // Cubic easing
        zoom = baseZoom * (1 + 0.03 * easedPulse);
        center.x = baseCenter.x + 0.0005 * Math.cos(2 * Math.PI * t / pulsePeriod);
        center.y = baseCenter.y + 0.0005 * Math.sin(2 * Math.PI * t / pulsePeriod);

        // Chronal Energy: expand/fold effect
        if (chronalEnergy) {
            chronalPhase += 0.01;
            iter = iterBase * (1 + 0.1 * Math.sin(chronalPhase));
        } else {
            iter = iterBase;
        }
    }

    gl.uniform2f(uR, c.width, c.height);
    gl.uniform2f(uC, center.x, center.y);
    gl.uniform1f(uZ, zoom);
    gl.uniform1f(uI, iter);
    gl.uniform1f(uT, t);
    gl.activeTexture(gl.TEXTURE_0);
    gl.bindTexture(gl.TEXTURE_2D, tex);
    gl.uniform1i(uG, 0);
    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);

    fps = 0.92 * fps + 0.08 * (1000 / (now - lastT));
    lastT = now;
    hud.textContent = `FPS ${fps.toFixed(0)}`;

    requestAnimationFrame(loop);
})();
</script>
</html>
